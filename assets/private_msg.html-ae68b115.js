import{_ as l,r as d,o as u,c as r,a as s,b as n,d as t,w as o,e as a}from"./app-a93bcaa0.js";const c={},i=a('<h1 id="私信" tabindex="-1"><a class="header-anchor" href="#私信" aria-hidden="true">#</a> 私信</h1><h2 id="对象说明" tabindex="-1"><a class="header-anchor" href="#对象说明" aria-hidden="true">#</a> 对象说明</h2><h3 id="会话对象" tabindex="-1"><a class="header-anchor" href="#会话对象" aria-hidden="true">#</a> 会话对象</h3><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>talker_id</td><td>num</td><td>聊天对象的id</td><td><code>session_type</code> 为 <code>1</code> 时表示用户 mid，为 <code>2</code> 时表示粉丝团 id</td></tr><tr><td>session_type</td><td>num</td><td>聊天对象的类型</td><td>1：用户<br>2：粉丝团</td></tr><tr><td>at_seqno</td><td>num</td><td>最近一次未读at自己的消息的序列号</td><td>在粉丝团会话中有效，若没有未读的 at 自己的消息则为 <code>0</code></td></tr><tr><td>top_ts</td><td>num</td><td>置顶该会话的时间</td><td>微秒级时间戳；若未置顶该会话则为 <code>0</code>；用于判断是否置顶了会话</td></tr><tr><td>group_name</td><td>str</td><td>粉丝团名称</td><td>在粉丝团会话中有效，其他会话中为空字符串</td></tr><tr><td>group_cover</td><td>str</td><td>粉丝团头像</td><td>在粉丝团会话中有效，其他会话中为空字符串</td></tr><tr><td>is_follow</td><td>num</td><td>是否关注了对方</td><td>在用户会话中有效，系统会话中为 <code>1</code>, 其他会话中为 <code>0</code></td></tr><tr><td>is_dnd</td><td>num</td><td>是否对会话设置了免打扰</td><td></td></tr><tr><td>ack_seqno</td><td>num</td><td>最近一次已读的消息序列号</td><td>用于快速跳转到首条未读的消息</td></tr><tr><td>ack_ts</td><td>num</td><td>最近一次已读时间</td><td>微秒级时间戳</td></tr><tr><td>session_ts</td><td>num</td><td>会话时间</td><td>微秒级时间戳</td></tr><tr><td>unread_count</td><td>num</td><td>未读消息数</td><td></td></tr><tr><td>last_msg</td><td>有效时：obj<br>无效时：null</td><td>最近的一条消息</td><td>详见<a href="#%E7%A7%81%E4%BF%A1%E4%B8%BB%E4%BD%93%E5%AF%B9%E8%B1%A1">私信主体对象</a></td></tr><tr><td>group_type</td><td>num</td><td>粉丝团类型</td><td>在粉丝团时有效<br>0：应援团<br>2：官方群（如：ID 为 10 的粉丝团）</td></tr><tr><td>can_fold</td><td>num</td><td>会话是否可被折叠入未关注人消息</td><td>在用户会话中有效</td></tr><tr><td>status</td><td>num</td><td>会话状态</td><td>详细信息有待补充</td></tr><tr><td>max_seqno</td><td>num</td><td>最近一条消息的序列号</td><td></td></tr><tr><td>new_push_msg</td><td>num</td><td>是否有新推送的消息</td><td></td></tr><tr><td>setting</td><td>num</td><td>推送设置</td><td>0：接收推送<br>1：不接收推送<br>2：（？）</td></tr><tr><td>is_guardian</td><td>num</td><td>自己是否为对方的骑士（？）</td><td>在用户会话中有效<br>0：否<br>2：是（？）</td></tr><tr><td>is_intercept</td><td>num</td><td>会话是否被拦截</td><td></td></tr><tr><td>is_trust</td><td>num</td><td>是否信任此会话</td><td>若为 <code>1</code>，则表示此会话之前被拦截过，但用户选择信任本会话</td></tr><tr><td>system_msg_type</td><td>num</td><td>系统会话类型</td><td>0：非系统会话<br>1：主播小助手<br>5：系统通知（？）<br>7：UP主小助手<br>8：客服消息<br>9：支付小助手</td></tr><tr><td>account_info</td><td>obj</td><td>会话信息</td><td>仅在系统会话中出现</td></tr><tr><td>live_status</td><td>num</td><td>用户是否正在直播</td><td>在用户会话中有效，其他会话中为 <code>0</code></td></tr><tr><td>biz_msg_unread_count</td><td>num</td><td>未读通知消息数</td><td></td></tr><tr><td>user_label</td><td>null</td><td>（？）</td><td><strong>作用尚不明确</strong></td></tr></tbody></table><p><code>account_info</code>对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>name</td><td>str</td><td>会话名称</td><td></td></tr><tr><td>pic_url</td><td>str</td><td>会话头像</td><td></td></tr></tbody></table><h3 id="私信主体对象" tabindex="-1"><a class="header-anchor" href="#私信主体对象" aria-hidden="true">#</a> 私信主体对象</h3>',7),k=s("thead",null,[s("tr",null,[s("th",null,"字段"),s("th",null,"类型"),s("th",null,"内容"),s("th",null,"备注")])],-1),m=s("tr",null,[s("td",null,"sender_uid"),s("td",null,"num"),s("td",null,"发送者mid"),s("td")],-1),b=s("tr",null,[s("td",null,"receiver_type"),s("td",null,"num"),s("td",null,"接收者类型"),s("td",null,[n("1：用户"),s("br"),n("2：粉丝团")])],-1),v=s("tr",null,[s("td",null,"receiver_id"),s("td",null,"num"),s("td",null,"接收者id"),s("td",null,[s("code",null,"receiver_type"),n(" 为 "),s("code",null,"1"),n(" 时表示用户 mid，为 "),s("code",null,"2"),n(" 时表示粉丝团 id")])],-1),q=s("td",null,"msg_type",-1),_=s("td",null,"num",-1),h=s("td",null,"消息类型",-1),y=s("td",null,"content",-1),g=s("td",null,"str",-1),f=s("td",null,"消息内容",-1),x=s("strong",null,"经过 JSON 序列化后的文本",-1),w=s("tr",null,[s("td",null,"msg_seqno"),s("td",null,"num"),s("td",null,"消息序列号"),s("td",null,"按照时间顺序从小到大")],-1),j=s("tr",null,[s("td",null,"timestamp"),s("td",null,"num"),s("td",null,"消息发送时间"),s("td",null,"秒级时间戳")],-1),A=s("tr",null,[s("td",null,"at_uids"),s("td",null,[n("有效时：array"),s("br"),n("无效时：null")]),s("td",null,"at的成员mid"),s("td",null,[n("在粉丝团时有效；此项为 "),s("code",null,"null"),n(" 或 "),s("code",null,"[0]"),n(" 均表示没有 at 成员")])],-1),E=s("tr",null,[s("td",null,"msg_key"),s("td",null,"num"),s("td",null,"消息唯一id"),s("td",null,"部分库在解析JSON对象中的大数时存在数值的精度丢失问题，因此在处理私信时可能会出现问题，建议使用修复了这一问题的库（如将大数转换成文本）")],-1),S=s("tr",null,[s("td",null,"msg_status"),s("td",null,"num"),s("td",null,"消息状态"),s("td",null,[n("0：正常"),s("br"),n("1：被撤回（接口仍能返回被撤回的私信内容）"),s("br"),n("2：被系统撤回（如：消息被举报；私信将不会显示在前端，B站接口也不会返回被系统撤回的私信的信息）"),s("br"),n("50：图片已失效（私信内容为一张提示“图片出现问题”的图片）")])],-1),B=s("tr",null,[s("td",null,"sys_cancel"),s("td",null,"bool"),s("td",null,"是否为系统撤回"),s("td",null,[n("仅当 "),s("code",null,"msg_type"),n(" 为 "),s("code",null,"5"),n(" 且此项值为 "),s("code",null,"true"),n(" 时有此项；若此项值为 "),s("code",null,"true"),n("，表示目标消息是被系统撤回的，此时前端将不显示该私信且没有提示")])],-1),D=s("tr",null,[s("td",null,"notify_code"),s("td",null,"str"),s("td",null,"通知代码"),s("td",null,[n("发送通知时使用，以下划线 "),s("code",null,"_"),n(" 分割，第 1 项表示主业务 id，第 2 项表示子业务 id；若这条私信非通知则为空文本；详细信息有待补充")])],-1),T=s("tr",null,[s("td",null,"new_face_version"),s("td",null,"num"),s("td",null,"表情包版本"),s("td",null,[n("为 "),s("code",null,"0"),n(" 或无此项表示旧版表情包，此时 B 站会自动转换成新版表情包，例如 "),s("code",null,"[doge]"),n(" -> "),s("code",null,"[tv_doge]"),n("；"),s("code",null,"1"),n(" 为新版")])],-1),H=s("tr",null,[s("td",null,"msg_source"),s("td",null,"num"),s("td",null,"消息来源"),s("td",null,[n("见"),s("a",{href:"#%E6%B6%88%E6%81%AF%E6%9D%A5%E6%BA%90%E5%88%97%E8%A1%A8"},"消息来源列表")])],-1),C=a('<p><code>私信主体对象</code>中的<code>at_uids</code>数组：</p><table><thead><tr><th>项</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>0</td><td>num</td><td>用户1</td><td>成员mid</td></tr><tr><td>n</td><td>num</td><td>用户(n+1)</td><td></td></tr><tr><td>……</td><td>num</td><td>……</td><td>……</td></tr></tbody></table><h3 id="消息来源列表" tabindex="-1"><a class="header-anchor" href="#消息来源列表" aria-hidden="true">#</a> 消息来源列表</h3>',3),F=s("thead",null,[s("tr",null,[s("th",null,"代码"),s("th",null,"含义"),s("th",null,"备注")])],-1),z=s("tr",null,[s("td",null,"0"),s("td",null,"未知来源"),s("td",null,"在以前发送的部分私信的来源代码")],-1),U=s("tr",null,[s("td",null,"1"),s("td",null,"iOS"),s("td")],-1),I=s("tr",null,[s("td",null,"2"),s("td",null,"Android"),s("td")],-1),G=s("tr",null,[s("td",null,"3"),s("td",null,"H5"),s("td")],-1),V=s("tr",null,[s("td",null,"4"),s("td",null,"PC客户端"),s("td")],-1),P=s("tr",null,[s("td",null,"5"),s("td",null,"官方推送消息"),s("td",null,"包括：官方向大多数用户自动发送的私信（如：UP主小助手的推广）等")],-1),Q=s("tr",null,[s("td",null,"6"),s("td",null,"推送/通知消息"),s("td",null,"包括：特别关注时稿件的自动推送、因成为契约者而自动发送的私信、包月充电回馈私信、官方发送的特定于自己的消息（如：UP主小助手的稿件审核状态通知）等")],-1),O=s("tr",null,[s("td",null,"7"),s("td",null,"Web"),s("td")],-1),N=s("tr",null,[s("td",null,"8"),s("td",null,"自动回复 - 被关注回复"),s("td",null,"B站前端会显示“此条消息为自动回复”")],-1),J=s("tr",null,[s("td",null,"9"),s("td",null,"自动回复 - 收到消息回复"),s("td",null,"B站前端会显示“此条消息为自动回复”")],-1),L=s("tr",null,[s("td",null,"10"),s("td",null,"自动回复 - 关键词回复"),s("td",null,"B站前端会显示“此条消息为自动回复”")],-1),R=s("tr",null,[s("td",null,"11"),s("td",null,"自动回复 - 大航海上船回复"),s("td",null,"B站前端会显示“此条消息为自动回复”")],-1),M=s("tr",null,[s("td",null,"12"),s("td",null,"自动推送 - UP 主赠言"),s("td",null,[n("在以前稿件的自动推送与其附带的 UP 主赠言是 2 条不同的私信（其中 UP 主赠言的消息来源代码为 12），现在 UP 主赠言已被合并成为稿件自动推送消息的一部分（"),s("code",null,"attach_msg"),n("）")])],-1),K=s("tr",null,[s("td",null,"13"),s("td",null,"粉丝团系统提示"),s("td",null,"如：粉丝团中的提示信息“欢迎xxx入群”")],-1),W=s("tr",null,[s("td",null,"16"),s("td",null,"系统"),s("td",null,[n("目前仅在 "),s("code",null,"msg_type"),n(" 为 "),s("code",null,"51"),n(" 时使用该代码")])],-1),Z=s("tr",null,[s("td",null,"17"),s("td",null,"互相关注"),s("td",null,"互相关注时自动发送的私信“我们已互相关注，开始聊天吧~”")],-1),X=s("tr",null,[s("td",null,"18"),s("td",null,"系统提示"),s("td",null,[n("目前仅在 "),s("code",null,"msg_type"),n(" 为 "),s("code",null,"18"),n(" 时使用该代码，如：“对方主动回复或关注你前，最多发送1条消息”")])],-1),Y=s("td",null,"19",-1),$=s("td",null,"AI",-1),ss={href:"https://space.bilibili.com/1400565964/",target:"_blank",rel:"noopener noreferrer"},ns=a(`<h2 id="获取未读私信数" tabindex="-1"><a class="header-anchor" href="#获取未读私信数" aria-hidden="true">#</a> 获取未读私信数</h2><blockquote><p>https://api.vc.bilibili.com/session_svr/v1/session_svr/single_unread</p></blockquote><p><em>请求方式：GET</em></p><p>认证方式：Cookie（SESSDATA）</p><p>注: 该接口默认每 2 分钟请求一次</p><p><strong>URL参数:</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>内容</th><th>必要性</th><th>备注</th></tr></thead><tbody><tr><td>unread_type</td><td>num</td><td>未读类型</td><td>非必要</td><td>0：所有<br>1：仅已关注<br>2：仅未关注<br>3：仅被拦截 (须同时设置参数 <code>show_dustbin=1</code>)<br>默认为 <code>0</code></td></tr><tr><td>show_unfollow_list</td><td>num</td><td>是否返回未关注人推送消息数</td><td>非必要</td><td>0：否<br>1：是</td></tr><tr><td>show_dustbin</td><td>num</td><td>是否返回被拦截私信数</td><td>非必要</td><td>0：否<br>1：是</td></tr><tr><td>build</td><td>num</td><td>客户端内部版本号</td><td>非必要</td><td>默认为 <code>0</code></td></tr><tr><td>mobi_app</td><td>str</td><td>平台标识</td><td>非必要</td><td>可为 <code>web</code> 等</td></tr></tbody></table><p><strong>json回复：</strong></p><p>根对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>code</td><td>num</td><td>返回值</td><td>0：成功<br>-101：账号未登录</td></tr><tr><td>msg</td><td>str</td><td>错误信息</td><td>默认为0</td></tr><tr><td>message</td><td>str</td><td>错误信息</td><td>默认为0</td></tr><tr><td>ttl</td><td>num</td><td>1</td><td></td></tr><tr><td>data</td><td>obj</td><td>信息本体</td><td></td></tr></tbody></table><p><code>data</code> 对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>unfollow_unread</td><td>num</td><td>未读未关注用户私信数</td><td></td></tr><tr><td>follow_unread</td><td>num</td><td>未读已关注用户私信数</td><td></td></tr><tr><td>unfollow_push_msg</td><td>num</td><td>未读未关注用户推送消息数</td><td></td></tr><tr><td>dustbin_push_msg</td><td>num</td><td>未读被拦截的推送消息数</td><td></td></tr><tr><td>dustbin_unread</td><td>num</td><td>未读被拦截的私信数</td><td></td></tr><tr><td>biz_msg_unfollow_unread</td><td>num</td><td>未读未关注用户通知数</td><td></td></tr><tr><td>biz_msg_follow_unread</td><td>num</td><td>未读已关注用户通知数</td><td></td></tr><tr><td>custom_unread</td><td>num</td><td>未读客服消息数</td><td></td></tr></tbody></table><p><strong>示例：</strong></p><p>以下信息代表未读未关注用户私信数为 <code>1</code> 条，未读已关注用户私信数为 <code>6</code> 条</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token string">&#39;https://api.vc.bilibili.com/session_svr/v1/session_svr/single_unread&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;unread_type=0&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;show_unfollow_list=1&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;show_dustbin=1&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;build=0&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;mobi_app=web&#39;</span> <span class="token punctuation">\\</span>
    <span class="token parameter variable">-b</span> <span class="token string">&#39;SESSDATA=xxx&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details><summary>查看响应示例：</summary><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;ttl&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;unfollow_unread&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token property">&quot;follow_unread&quot;</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>
        <span class="token property">&quot;unfollow_push_msg&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;dustbin_push_msg&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;dustbin_unread&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;biz_msg_unfollow_unread&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;biz_msg_follow_unread&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;custom_unread&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h2 id="获取指定类型会话列表" tabindex="-1"><a class="header-anchor" href="#获取指定类型会话列表" aria-hidden="true">#</a> 获取指定类型会话列表</h2><blockquote><p>https://api.vc.bilibili.com/session_svr/v1/session_svr/get_sessions</p></blockquote><p><em>请求方式：GET</em></p><p>认证方式：Cookie（SESSDATA）</p><p><strong>url参数：</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>内容</th><th>必要性</th><th>备注</th></tr></thead><tbody><tr><td>session_type</td><td>num</td><td>会话类型</td><td>必要</td><td>1：未被折叠<br>2：未关注人<br>3：粉丝团<br>4：所有<br>5：被拦截<br>7：系统消息（？）</td></tr><tr><td>group_fold</td><td>num</td><td>是否折叠粉丝团消息</td><td>非必要</td><td>0：否<br>1：是</td></tr><tr><td>unfollow_fold</td><td>num</td><td>是否折叠未关注人消息</td><td>非必要</td><td>0：否<br>1：是</td></tr><tr><td>sort_rule</td><td>num</td><td>排序方式</td><td>非必要</td><td>1、2：按会话时间逆向排序<br>3：按已读时间逆向排序<br>其他：用户按会话时间逆向排序，粉丝团按加群时间正向排序（？）</td></tr><tr><td>begin_ts</td><td>num</td><td>起始时间</td><td>非必要</td><td>微秒级时间戳</td></tr><tr><td>end_ts</td><td>num</td><td>终止时间</td><td>非必要</td><td>微秒级时间戳</td></tr><tr><td>size</td><td>num</td><td>返回的会话数</td><td>非必要</td><td>默认为 <code>20</code>，最大为 <code>100</code></td></tr><tr><td>build</td><td>num</td><td>客户端内部版本号</td><td>非必要</td><td>默认为 <code>0</code></td></tr><tr><td>mobi_app</td><td>str</td><td>平台标识</td><td>非必要</td><td>可为 <code>web</code> 等</td></tr></tbody></table><p><strong>json回复：</strong></p><p>根对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>code</td><td>num</td><td>返回值</td><td>0：成功<br>-101：账号未登录<br>-400：请求错误</td></tr><tr><td>msg</td><td>str</td><td>错误信息</td><td>默认为0</td></tr><tr><td>message</td><td>str</td><td>错误信息</td><td>默认为0</td></tr><tr><td>ttl</td><td>num</td><td>1</td><td></td></tr><tr><td>data</td><td>obj</td><td>数据本体</td><td></td></tr></tbody></table><p><code>data</code>对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>session_list</td><td>有会话时：array<br>无会话时：null</td><td>会话列表</td><td></td></tr><tr><td>has_more</td><td>num</td><td>是否有更多会话</td><td></td></tr><tr><td>anti_distrub_cleaning</td><td>bool</td><td>是否开启了“一键防骚扰”功能</td><td></td></tr><tr><td>is_address_list_empty</td><td>num</td><td>0</td><td><strong>作用尚不明确</strong></td></tr><tr><td>system_msg</td><td>obj</td><td>系统会话列表</td><td>仅当存在系统会话时有此项</td></tr><tr><td>show_level</td><td>bool</td><td>是否在会话列表中显示用户等级</td><td>目前恒为 <code>true</code></td></tr></tbody></table><p><code>data</code>对象中的<code>session_list</code>数组：</p><table><thead><tr><th>项</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>0</td><td>obj</td><td>会话1</td><td>详见<a href="#%E4%BC%9A%E8%AF%9D%E5%AF%B9%E8%B1%A1">会话对象</a></td></tr><tr><td>n</td><td>obj</td><td>会话(n+1)</td><td></td></tr><tr><td>……</td><td>obj</td><td>……</td><td>……</td></tr></tbody></table><p><code>data</code>对象中的<code>system_msg</code>对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>{系统会话类型代码}</td><td>num</td><td>系统会话id</td><td>详见<a href="#%E4%BC%9A%E8%AF%9D%E5%AF%B9%E8%B1%A1">会话对象</a>中对 <code>system_msg_type</code> 字段的说明</td></tr></tbody></table><p><strong>示例：</strong></p><p>获取会话列表：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-G</span> <span class="token string">&#39;https://api.vc.bilibili.com/session_svr/v1/session_svr/get_sessions&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;session_type=1&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;group_fold=0&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;unfollow_fold=0&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;sort_rule=2&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;size=3&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;build=0&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;mobi_app=web&#39;</span> <span class="token punctuation">\\</span>
    <span class="token parameter variable">-b</span> <span class="token string">&#39;SESSDATA=xxx&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details><summary>查看响应示例：</summary><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;ttl&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;session_list&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;talker_id&quot;</span><span class="token operator">:</span> <span class="token number">844424930131966</span><span class="token punctuation">,</span>
                <span class="token property">&quot;session_type&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token property">&quot;at_seqno&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;top_ts&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;group_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;group_cover&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;is_follow&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token property">&quot;is_dnd&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;ack_seqno&quot;</span><span class="token operator">:</span> <span class="token number">1238729956474887</span><span class="token punctuation">,</span>
                <span class="token property">&quot;ack_ts&quot;</span><span class="token operator">:</span> <span class="token number">1709536924979884</span><span class="token punctuation">,</span>
                <span class="token property">&quot;session_ts&quot;</span><span class="token operator">:</span> <span class="token number">1712305278098351</span><span class="token punctuation">,</span>
                <span class="token property">&quot;unread_count&quot;</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
                <span class="token property">&quot;last_msg&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;sender_uid&quot;</span><span class="token operator">:</span> <span class="token number">844424930131966</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;receiver_type&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;receiver_id&quot;</span><span class="token operator">:</span> <span class="token number">425503913</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;msg_type&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;content&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{\\&quot;title\\&quot;:\\&quot;流量奖励到账通知\\&quot;,\\&quot;text\\&quot;:\\&quot;恭喜您已获得2000流量曝光奖励，快来投稿使用吧。\\&quot;,\\&quot;jump_text\\&quot;:\\&quot;\\&quot;,\\&quot;jump_uri\\&quot;:\\&quot;\\&quot;,\\&quot;modules\\&quot;:null,\\&quot;jump_text_2\\&quot;:\\&quot;\\&quot;,\\&quot;jump_uri_2\\&quot;:\\&quot;\\&quot;,\\&quot;jump_text_3\\&quot;:\\&quot;\\&quot;,\\&quot;jump_uri_3\\&quot;:\\&quot;\\&quot;,\\&quot;notifier\\&quot;:null,\\&quot;jump_uri_config\\&quot;:{\\&quot;all_uri\\&quot;:\\&quot;https://member.bilibili.com/york/flow-reward?navhide=1\\\\u0026from=msgrecall\\&quot;,\\&quot;text\\&quot;:\\&quot;\\&quot;},\\&quot;jump_uri_2_config\\&quot;:{\\&quot;text\\&quot;:\\&quot;\\&quot;},\\&quot;jump_uri_3_config\\&quot;:{\\&quot;text\\&quot;:\\&quot;\\&quot;},\\&quot;biz_content\\&quot;:null}&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;msg_seqno&quot;</span><span class="token operator">:</span> <span class="token number">1285290404823041</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;timestamp&quot;</span><span class="token operator">:</span> <span class="token number">1712305278</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;at_uids&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;msg_key&quot;</span><span class="token operator">:</span> <span class="token number">7354295169819585966</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;msg_status&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;notify_code&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2091_253&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;new_face_version&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;msg_source&quot;</span><span class="token operator">:</span> <span class="token number">6</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token property">&quot;group_type&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;can_fold&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;max_seqno&quot;</span><span class="token operator">:</span> <span class="token number">1285290404823041</span><span class="token punctuation">,</span>
                <span class="token property">&quot;new_push_msg&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token property">&quot;setting&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;is_guardian&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;is_intercept&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;is_trust&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;system_msg_type&quot;</span><span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
                <span class="token property">&quot;account_info&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;UP主小助手&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;pic_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://message.biliimg.com/bfs/im/489a63efadfb202366c2f88853d2217b5ddc7a13.png&quot;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token property">&quot;live_status&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;biz_msg_unread_count&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;user_label&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;talker_id&quot;</span><span class="token operator">:</span> <span class="token number">293793435</span><span class="token punctuation">,</span>
                <span class="token property">&quot;session_type&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token property">&quot;at_seqno&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;top_ts&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;group_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;group_cover&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;is_follow&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token property">&quot;is_dnd&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;ack_seqno&quot;</span><span class="token operator">:</span> <span class="token number">1236306587877408</span><span class="token punctuation">,</span>
                <span class="token property">&quot;ack_ts&quot;</span><span class="token operator">:</span> <span class="token number">1709536984481314</span><span class="token punctuation">,</span>
                <span class="token property">&quot;session_ts&quot;</span><span class="token operator">:</span> <span class="token number">1709385615744065</span><span class="token punctuation">,</span>
                <span class="token property">&quot;unread_count&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;last_msg&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;sender_uid&quot;</span><span class="token operator">:</span> <span class="token number">293793435</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;receiver_type&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;receiver_id&quot;</span><span class="token operator">:</span> <span class="token number">425503913</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;msg_type&quot;</span><span class="token operator">:</span> <span class="token number">11</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;content&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{\\&quot;title\\&quot;:\\&quot;OHHHHHH家人们，我分数终于破w了！紫框了这下确实不好意思说自己是只打红谱的萌新了\\&quot;,\\&quot;times\\&quot;:14,\\&quot;cover\\&quot;:\\&quot;http://i0.hdslb.com/bfs/archive/8821c03ab27a0bcf2bf32af814e758ab17a1e27e.png\\&quot;,\\&quot;rid\\&quot;:1951316064,\\&quot;type_\\&quot;:8,\\&quot;desc\\&quot;:\\&quot;OHHHHHH家人们，我分数终于破w了！紫框了这下确实不好意思说自己是只打红谱的萌新了\\&quot;,\\&quot;bvid\\&quot;:\\&quot;BV1zC411p7JN\\&quot;,\\&quot;view\\&quot;:452,\\&quot;danmaku\\&quot;:0,\\&quot;pub_date\\&quot;:1709385603,\\&quot;attach_msg\\&quot;:null}&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;msg_seqno&quot;</span><span class="token operator">:</span> <span class="token number">1236306587877408</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;timestamp&quot;</span><span class="token operator">:</span> <span class="token number">1709385615</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;at_uids&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;msg_key&quot;</span><span class="token operator">:</span> <span class="token number">7341755312943193481</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;msg_status&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;notify_code&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;new_face_version&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;msg_source&quot;</span><span class="token operator">:</span> <span class="token number">6</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token property">&quot;group_type&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;can_fold&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;max_seqno&quot;</span><span class="token operator">:</span> <span class="token number">1236306587877408</span><span class="token punctuation">,</span>
                <span class="token property">&quot;new_push_msg&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;setting&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;is_guardian&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;is_intercept&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;is_trust&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;system_msg_type&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;live_status&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;biz_msg_unread_count&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;user_label&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;talker_id&quot;</span><span class="token operator">:</span> <span class="token number">221082140</span><span class="token punctuation">,</span>
                <span class="token property">&quot;session_type&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
                <span class="token property">&quot;at_seqno&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;top_ts&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;group_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;社会易姐QwQ的应援团&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;group_cover&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://i0.hdslb.com/bfs/face/aebb2639a0d47f2ce1fec0631f412eaf53d4a0be.jpg&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;is_follow&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;is_dnd&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;ack_seqno&quot;</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
                <span class="token property">&quot;ack_ts&quot;</span><span class="token operator">:</span> <span class="token number">1695011620552332</span><span class="token punctuation">,</span>
                <span class="token property">&quot;session_ts&quot;</span><span class="token operator">:</span> <span class="token number">1693626568439784</span><span class="token punctuation">,</span>
                <span class="token property">&quot;unread_count&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;last_msg&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;sender_uid&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;receiver_type&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;receiver_id&quot;</span><span class="token operator">:</span> <span class="token number">221082140</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;msg_type&quot;</span><span class="token operator">:</span> <span class="token number">306</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;content&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{\\&quot;group_id\\&quot;:221082140,\\&quot;content\\&quot;:\\&quot;欢迎罗板栗入群\\&quot;}&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;msg_seqno&quot;</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;timestamp&quot;</span><span class="token operator">:</span> <span class="token number">1693626568</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;at_uids&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;msg_key&quot;</span><span class="token operator">:</span> <span class="token number">7274070721607234847</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;msg_status&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;notify_code&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;msg_source&quot;</span><span class="token operator">:</span> <span class="token number">13</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token property">&quot;group_type&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;can_fold&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;max_seqno&quot;</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
                <span class="token property">&quot;new_push_msg&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;setting&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;is_guardian&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;is_intercept&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;is_trust&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;system_msg_type&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;live_status&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;biz_msg_unread_count&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;user_label&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token property">&quot;has_more&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token property">&quot;anti_disturb_cleaning&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token property">&quot;is_address_list_empty&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;system_msg&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;1&quot;</span><span class="token operator">:</span> <span class="token number">844424930131967</span><span class="token punctuation">,</span>
            <span class="token property">&quot;7&quot;</span><span class="token operator">:</span> <span class="token number">844424930131966</span><span class="token punctuation">,</span> 
            <span class="token property">&quot;9&quot;</span><span class="token operator">:</span> <span class="token number">844424930131965</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;show_level&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h2 id="获取新会话列表" tabindex="-1"><a class="header-anchor" href="#获取新会话列表" aria-hidden="true">#</a> 获取新会话列表</h2><blockquote><p>https://api.vc.bilibili.com/session_svr/v1/session_svr/new_sessions</p></blockquote><p><em>请求方式：GET</em></p><p>认证方式：Cookie（SESSDATA）</p><p>获取指定时间之后的新会话列表</p><p><strong>url参数：</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>内容</th><th>必要性</th><th>备注</th></tr></thead><tbody><tr><td>begin_ts</td><td>num</td><td>起始时间</td><td>非必要</td><td>微秒级时间戳</td></tr><tr><td>size</td><td>num</td><td>返回的会话数</td><td>非必要</td><td>默认为 <code>20</code>，最大为 <code>100</code></td></tr><tr><td>build</td><td>num</td><td>客户端内部版本号</td><td>非必要</td><td>默认为 <code>0</code></td></tr><tr><td>mobi_app</td><td>str</td><td>平台标识</td><td>非必要</td><td>可为 <code>web</code> 等</td></tr></tbody></table><p><strong>json回复：</strong></p><p>根对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>code</td><td>num</td><td>返回值</td><td>0：成功<br>-101：账号未登录<br>-400：请求错误</td></tr><tr><td>msg</td><td>str</td><td>错误信息</td><td>默认为0</td></tr><tr><td>message</td><td>str</td><td>错误信息</td><td>默认为0</td></tr><tr><td>ttl</td><td>num</td><td>1</td><td></td></tr><tr><td>data</td><td>obj</td><td>数据本体</td><td></td></tr></tbody></table><p><code>data</code>对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>session_list</td><td>有会话时：array<br>无会话时：null</td><td>会话列表</td><td>按发送时间顺序逆向排序</td></tr><tr><td>has_more</td><td>num</td><td>是否有更多会话</td><td></td></tr><tr><td>anti_distrub_cleaning</td><td>bool</td><td>是否开启了“一键防骚扰”功能</td><td></td></tr><tr><td>is_address_list_empty</td><td>num</td><td>0</td><td><strong>作用尚不明确</strong></td></tr><tr><td>show_level</td><td>bool</td><td>是否在会话列表中显示用户等级</td><td>目前恒为 <code>false</code></td></tr></tbody></table><p><code>data</code>对象中的<code>session_list</code>数组：</p><table><thead><tr><th>项</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>0</td><td>obj</td><td>会话1</td><td>详见<a href="#%E4%BC%9A%E8%AF%9D%E5%AF%B9%E8%B1%A1">会话对象</a></td></tr><tr><td>n</td><td>obj</td><td>会话(n+1)</td><td></td></tr><tr><td>……</td><td>obj</td><td>……</td><td>……</td></tr></tbody></table><p><strong>示例：</strong></p><p>获取<code>begin_ts=1712420213519391</code>之后的新会话列表：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-G</span> <span class="token string">&#39;https://api.vc.bilibili.com/session_svr/v1/session_svr/new_sessions&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;begin_ts=1712420213519391&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;size=3&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;build=0&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;mobi_app=web&#39;</span> <span class="token punctuation">\\</span>
    <span class="token parameter variable">-b</span> <span class="token string">&#39;SESSDATA=xxx&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details><summary>查看响应示例：</summary><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;ttl&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;session_list&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;talker_id&quot;</span><span class="token operator">:</span> <span class="token number">844424930131966</span><span class="token punctuation">,</span>
                <span class="token property">&quot;session_type&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token property">&quot;at_seqno&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;top_ts&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;group_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;group_cover&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;is_follow&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token property">&quot;is_dnd&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;ack_seqno&quot;</span><span class="token operator">:</span> <span class="token number">1238729956474887</span><span class="token punctuation">,</span>
                <span class="token property">&quot;ack_ts&quot;</span><span class="token operator">:</span> <span class="token number">1709536924979884</span><span class="token punctuation">,</span>
                <span class="token property">&quot;session_ts&quot;</span><span class="token operator">:</span> <span class="token number">1712305278098351</span><span class="token punctuation">,</span>
                <span class="token property">&quot;unread_count&quot;</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
                <span class="token property">&quot;last_msg&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;sender_uid&quot;</span><span class="token operator">:</span> <span class="token number">844424930131966</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;receiver_type&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;receiver_id&quot;</span><span class="token operator">:</span> <span class="token number">425503913</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;msg_type&quot;</span><span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;content&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{\\&quot;title\\&quot;:\\&quot;流量奖励到账通知\\&quot;,\\&quot;text\\&quot;:\\&quot;恭喜您已获得2000流量曝光奖励，快来投稿使用吧。\\&quot;,\\&quot;jump_text\\&quot;:\\&quot;\\&quot;,\\&quot;jump_uri\\&quot;:\\&quot;\\&quot;,\\&quot;modules\\&quot;:null,\\&quot;jump_text_2\\&quot;:\\&quot;\\&quot;,\\&quot;jump_uri_2\\&quot;:\\&quot;\\&quot;,\\&quot;jump_text_3\\&quot;:\\&quot;\\&quot;,\\&quot;jump_uri_3\\&quot;:\\&quot;\\&quot;,\\&quot;notifier\\&quot;:null,\\&quot;jump_uri_config\\&quot;:{\\&quot;all_uri\\&quot;:\\&quot;https://member.bilibili.com/york/flow-reward?navhide=1\\\\u0026from=msgrecall\\&quot;,\\&quot;text\\&quot;:\\&quot;\\&quot;},\\&quot;jump_uri_2_config\\&quot;:{\\&quot;text\\&quot;:\\&quot;\\&quot;},\\&quot;jump_uri_3_config\\&quot;:{\\&quot;text\\&quot;:\\&quot;\\&quot;},\\&quot;biz_content\\&quot;:null}&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;msg_seqno&quot;</span><span class="token operator">:</span> <span class="token number">1285290404823041</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;timestamp&quot;</span><span class="token operator">:</span> <span class="token number">1712305278</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;at_uids&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;msg_key&quot;</span><span class="token operator">:</span> <span class="token number">7354295169819585966</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;msg_status&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;notify_code&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2091_253&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;new_face_version&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;msg_source&quot;</span><span class="token operator">:</span> <span class="token number">6</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token property">&quot;group_type&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;can_fold&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;max_seqno&quot;</span><span class="token operator">:</span> <span class="token number">1285290404823041</span><span class="token punctuation">,</span>
                <span class="token property">&quot;new_push_msg&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token property">&quot;setting&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;is_guardian&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;is_intercept&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;is_trust&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;system_msg_type&quot;</span><span class="token operator">:</span> <span class="token number">7</span><span class="token punctuation">,</span>
                <span class="token property">&quot;account_info&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;UP主小助手&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;pic_url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://message.biliimg.com/bfs/im/489a63efadfb202366c2f88853d2217b5ddc7a13.png&quot;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token property">&quot;live_status&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;biz_msg_unread_count&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;user_label&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;talker_id&quot;</span><span class="token operator">:</span> <span class="token number">293793435</span><span class="token punctuation">,</span>
                <span class="token property">&quot;session_type&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token property">&quot;at_seqno&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;top_ts&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;group_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;group_cover&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;is_follow&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token property">&quot;is_dnd&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;ack_seqno&quot;</span><span class="token operator">:</span> <span class="token number">1236306587877408</span><span class="token punctuation">,</span>
                <span class="token property">&quot;ack_ts&quot;</span><span class="token operator">:</span> <span class="token number">1709536984481314</span><span class="token punctuation">,</span>
                <span class="token property">&quot;session_ts&quot;</span><span class="token operator">:</span> <span class="token number">1709385615744065</span><span class="token punctuation">,</span>
                <span class="token property">&quot;unread_count&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;last_msg&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;sender_uid&quot;</span><span class="token operator">:</span> <span class="token number">293793435</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;receiver_type&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;receiver_id&quot;</span><span class="token operator">:</span> <span class="token number">425503913</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;msg_type&quot;</span><span class="token operator">:</span> <span class="token number">11</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;content&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{\\&quot;title\\&quot;:\\&quot;OHHHHHH家人们，我分数终于破w了！紫框了这下确实不好意思说自己是只打红谱的萌新了\\&quot;,\\&quot;times\\&quot;:14,\\&quot;cover\\&quot;:\\&quot;http://i0.hdslb.com/bfs/archive/8821c03ab27a0bcf2bf32af814e758ab17a1e27e.png\\&quot;,\\&quot;rid\\&quot;:1951316064,\\&quot;type_\\&quot;:8,\\&quot;desc\\&quot;:\\&quot;OHHHHHH家人们，我分数终于破w了！紫框了这下确实不好意思说自己是只打红谱的萌新了\\&quot;,\\&quot;bvid\\&quot;:\\&quot;BV1zC411p7JN\\&quot;,\\&quot;view\\&quot;:452,\\&quot;danmaku\\&quot;:0,\\&quot;pub_date\\&quot;:1709385603,\\&quot;attach_msg\\&quot;:null}&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;msg_seqno&quot;</span><span class="token operator">:</span> <span class="token number">1236306587877408</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;timestamp&quot;</span><span class="token operator">:</span> <span class="token number">1709385615</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;at_uids&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;msg_key&quot;</span><span class="token operator">:</span> <span class="token number">7341755312943193481</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;msg_status&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;notify_code&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;new_face_version&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;msg_source&quot;</span><span class="token operator">:</span> <span class="token number">6</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token property">&quot;group_type&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;can_fold&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;max_seqno&quot;</span><span class="token operator">:</span> <span class="token number">1236306587877408</span><span class="token punctuation">,</span>
                <span class="token property">&quot;new_push_msg&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;setting&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;is_guardian&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;is_intercept&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;is_trust&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;system_msg_type&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;live_status&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;biz_msg_unread_count&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;user_label&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;talker_id&quot;</span><span class="token operator">:</span> <span class="token number">221082140</span><span class="token punctuation">,</span>
                <span class="token property">&quot;session_type&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
                <span class="token property">&quot;at_seqno&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;top_ts&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;group_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;社会易姐QwQ的应援团&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;group_cover&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://i0.hdslb.com/bfs/face/aebb2639a0d47f2ce1fec0631f412eaf53d4a0be.jpg&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;is_follow&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;is_dnd&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;ack_seqno&quot;</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
                <span class="token property">&quot;ack_ts&quot;</span><span class="token operator">:</span> <span class="token number">1695011620552332</span><span class="token punctuation">,</span>
                <span class="token property">&quot;session_ts&quot;</span><span class="token operator">:</span> <span class="token number">1693626568439784</span><span class="token punctuation">,</span>
                <span class="token property">&quot;unread_count&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;last_msg&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;sender_uid&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;receiver_type&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;receiver_id&quot;</span><span class="token operator">:</span> <span class="token number">221082140</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;msg_type&quot;</span><span class="token operator">:</span> <span class="token number">306</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;content&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{\\&quot;group_id\\&quot;:221082140,\\&quot;content\\&quot;:\\&quot;欢迎罗板栗入群\\&quot;}&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;msg_seqno&quot;</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;timestamp&quot;</span><span class="token operator">:</span> <span class="token number">1693626568</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;at_uids&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;msg_key&quot;</span><span class="token operator">:</span> <span class="token number">7274070721607234847</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;msg_status&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;notify_code&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;msg_source&quot;</span><span class="token operator">:</span> <span class="token number">13</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token property">&quot;group_type&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;can_fold&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;max_seqno&quot;</span><span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
                <span class="token property">&quot;new_push_msg&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;setting&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;is_guardian&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;is_intercept&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;is_trust&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;system_msg_type&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;live_status&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;biz_msg_unread_count&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;user_label&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token property">&quot;has_more&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;anti_disturb_cleaning&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token property">&quot;is_address_list_empty&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;show_level&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h2 id="获取会话详细信息" tabindex="-1"><a class="header-anchor" href="#获取会话详细信息" aria-hidden="true">#</a> 获取会话详细信息</h2><blockquote><p>https://api.vc.bilibili.com/session_svr/v1/session_svr/session_detail</p></blockquote><p><em>请求方式：GET</em></p><p>认证方式：Cookie（SESSDATA）</p><p>若从未与该会话聊过天，则返回 1000004 <code>入口节点已存在</code> 错误</p><p><strong>url参数：</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>内容</th><th>必要性</th><th>备注</th></tr></thead><tbody><tr><td>talker_id</td><td>num</td><td>聊天对象的id</td><td>必要</td><td><code>session_type</code> 为 <code>1</code> 时表示用户 mid，为 <code>2</code> 时表示粉丝团 id</td></tr><tr><td>session_type</td><td>num</td><td>聊天对象的类型</td><td>必要</td><td>1：用户<br>2：粉丝团</td></tr><tr><td>build</td><td>num</td><td>客户端内部版本号</td><td>非必要</td><td>默认为 <code>0</code></td></tr><tr><td>mobi_app</td><td>str</td><td>平台标识</td><td>非必要</td><td>可为 <code>web</code> 等</td></tr></tbody></table><p><strong>json回复：</strong></p><p>根对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>code</td><td>num</td><td>返回值</td><td>0：成功<br>-101：账号未登录<br>-400：请求错误<br>1000004：入口节点已存在</td></tr><tr><td>msg</td><td>str</td><td>错误信息</td><td>默认为0</td></tr><tr><td>message</td><td>str</td><td>错误信息</td><td>默认为0</td></tr><tr><td>ttl</td><td>num</td><td>1</td><td></td></tr><tr><td>data</td><td>有效时：obj<br>无效时：null</td><td>数据本体</td><td>详见<a href="#%E4%BC%9A%E8%AF%9D%E5%AF%B9%E8%B1%A1">会话对象</a></td></tr></tbody></table><p><strong>示例：</strong></p><p>获取会话<code>talker_id=293793435&amp;session_type=1</code>的详细信息：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-G</span> <span class="token string">&#39;https://api.vc.bilibili.com/session_svr/v1/session_svr/session_detail&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;talker_id=293793435&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;session_type=1&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;build=0&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;mobi_app=web&#39;</span> <span class="token punctuation">\\</span>
    <span class="token parameter variable">-b</span> <span class="token string">&#39;SESSDATA=xxx&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details><summary>查看响应示例：</summary><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;ttl&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;talker_id&quot;</span><span class="token operator">:</span> <span class="token number">293793435</span><span class="token punctuation">,</span>
        <span class="token property">&quot;session_type&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token property">&quot;at_seqno&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;top_ts&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;group_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;group_cover&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;is_follow&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token property">&quot;is_dnd&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;ack_seqno&quot;</span><span class="token operator">:</span> <span class="token number">1236306587877408</span><span class="token punctuation">,</span>
        <span class="token property">&quot;ack_ts&quot;</span><span class="token operator">:</span> <span class="token number">1709536984481314</span><span class="token punctuation">,</span>
        <span class="token property">&quot;session_ts&quot;</span><span class="token operator">:</span> <span class="token number">1709385615744065</span><span class="token punctuation">,</span>
        <span class="token property">&quot;unread_count&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;last_msg&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;sender_uid&quot;</span><span class="token operator">:</span> <span class="token number">293793435</span><span class="token punctuation">,</span>
            <span class="token property">&quot;receiver_type&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token property">&quot;receiver_id&quot;</span><span class="token operator">:</span> <span class="token number">425503913</span><span class="token punctuation">,</span>
            <span class="token property">&quot;msg_type&quot;</span><span class="token operator">:</span> <span class="token number">11</span><span class="token punctuation">,</span>
            <span class="token property">&quot;content&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{\\&quot;title\\&quot;:\\&quot;OHHHHHH家人们，我分数终于破w了！紫框了这下确实不好意思说自己是只打红谱的萌新了\\&quot;,\\&quot;times\\&quot;:14,\\&quot;cover\\&quot;:\\&quot;http://i0.hdslb.com/bfs/archive/8821c03ab27a0bcf2bf32af814e758ab17a1e27e.png\\&quot;,\\&quot;rid\\&quot;:1951316064,\\&quot;type_\\&quot;:8,\\&quot;desc\\&quot;:\\&quot;OHHHHHH家人们，我分数终于破w了！紫框了这下确实不好意思说自己是只打红谱的萌新了\\&quot;,\\&quot;bvid\\&quot;:\\&quot;BV1zC411p7JN\\&quot;,\\&quot;view\\&quot;:452,\\&quot;danmaku\\&quot;:0,\\&quot;pub_date\\&quot;:1709385603,\\&quot;attach_msg\\&quot;:null}&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;msg_seqno&quot;</span><span class="token operator">:</span> <span class="token number">1236306587877408</span><span class="token punctuation">,</span>
            <span class="token property">&quot;timestamp&quot;</span><span class="token operator">:</span> <span class="token number">1709385615</span><span class="token punctuation">,</span>
            <span class="token property">&quot;at_uids&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
            <span class="token property">&quot;msg_key&quot;</span><span class="token operator">:</span> <span class="token number">7341755312943193481</span><span class="token punctuation">,</span>
            <span class="token property">&quot;msg_status&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token property">&quot;notify_code&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;new_face_version&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token property">&quot;msg_source&quot;</span><span class="token operator">:</span> <span class="token number">6</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;group_type&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;can_fold&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;max_seqno&quot;</span><span class="token operator">:</span> <span class="token number">1236306587877408</span><span class="token punctuation">,</span>
        <span class="token property">&quot;new_push_msg&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;setting&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;is_guardian&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;is_intercept&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;is_trust&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;system_msg_type&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;live_status&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;biz_msg_unread_count&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;user_label&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h2 id="查询私信消息记录" tabindex="-1"><a class="header-anchor" href="#查询私信消息记录" aria-hidden="true">#</a> 查询私信消息记录</h2><blockquote><p>https://api.vc.bilibili.com/svr_sync/v1/svr_sync/fetch_session_msgs</p></blockquote><p><em>请求方式：GET</em></p><p>认证方式：Cookie（SESSDATA）</p><p>仅调用该接口不会设置私信为已读，详见<a href="#%E8%AE%BE%E7%BD%AE%E7%A7%81%E4%BF%A1%E4%B8%BA%E5%B7%B2%E8%AF%BB">设置私信为已读</a></p><p>此接口有设计缺陷，可以获取已经撤回（<code>msg_status</code> 为 <code>1</code>）的私信内容</p><p><strong>url参数：</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>内容</th><th>必要性</th><th>备注</th></tr></thead><tbody><tr><td>talker_id</td><td>num</td><td>聊天对象的id</td><td>必要</td><td><code>session_type</code> 为 <code>1</code> 时表示用户 mid，为 <code>2</code> 时表示粉丝团 id</td></tr><tr><td>session_type</td><td>num</td><td>聊天对象的类型</td><td>必要</td><td>1：用户<br>2：粉丝团</td></tr><tr><td>size</td><td>num</td><td>返回消息数量</td><td>非必要</td><td>默认为 20，最大为 200</td></tr><tr><td>begin_seqno</td><td>num</td><td>开始的序列号</td><td>非必要</td><td>提供本参数时返回以本序列号开始（不包括本序列号）的消息</td></tr><tr><td>end_seqno</td><td>num</td><td>结束的序列号</td><td>非必要</td><td>提供本参数时返回以本序列号结束（不包括本序列号）的消息</td></tr><tr><td>sender_device_id</td><td>num</td><td>发送者设备</td><td>非必要</td><td>默认为 <code>1</code></td></tr><tr><td>build</td><td>num</td><td>客户端内部版本号</td><td>非必要</td><td>默认为 <code>0</code></td></tr><tr><td>mobi_app</td><td>str</td><td>平台标识</td><td>非必要</td><td>可为 <code>web</code> 等；<strong>若本参数值为 <code>web</code>，则返回新版表情包</strong></td></tr></tbody></table><p><strong>json回复：</strong></p><p>根对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>code</td><td>num</td><td>返回值</td><td>0：成功<br>2：非法参数<br>-101：账号未登录<br>-400：请求错误<br>700013：已解散QAQ，无法执行此操作<br>700014：你已不在此同萌中QAQ，无法执行此操作</td></tr><tr><td>msg</td><td>str</td><td>错误信息</td><td>默认为0</td></tr><tr><td>message</td><td>str</td><td>错误信息</td><td>默认为0</td></tr><tr><td>ttl</td><td>num</td><td>1</td><td></td></tr><tr><td>data</td><td>obj</td><td>数据本体</td><td></td></tr></tbody></table><p><code>data</code>对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>messages</td><td>有私信时：array<br>无私信时：null</td><td>私信列表</td><td>按发送时间顺序逆向排序</td></tr><tr><td>has_more</td><td>num</td><td>是否有更多私信</td><td></td></tr><tr><td>min_seqno</td><td>num</td><td>所有消息中最小的序列号（最早）</td><td>若无私信则为 <code>18446744073709551615</code></td></tr><tr><td>max_seqno</td><td>num</td><td>所有消息中最大的序列号（最晚）</td><td>若无私信则为 <code>0</code></td></tr><tr><td>e_infos</td><td>array</td><td>聊天表情列表</td><td>若私信列表中无表情则无此项</td></tr></tbody></table><p><code>data</code>对象中的<code>messages</code>数组：</p><table><thead><tr><th>项</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>0</td><td>obj</td><td>私信1</td><td>详见<a href="#%E7%A7%81%E4%BF%A1%E4%B8%BB%E4%BD%93%E5%AF%B9%E8%B1%A1">私信主体对象</a></td></tr><tr><td>n</td><td>obj</td><td>私信(n+1)</td><td></td></tr><tr><td>……</td><td>obj</td><td>……</td><td>……</td></tr></tbody></table><p><code>data</code>对象中的<code>e_infos</code>数组：</p><table><thead><tr><th>项</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>0</td><td>obj</td><td>表情1</td><td></td></tr><tr><td>n</td><td>obj</td><td>表情(n+1)</td><td></td></tr><tr><td>……</td><td>obj</td><td>……</td><td>……</td></tr></tbody></table><p><code>data</code>对象中的<code>e_infos</code>数组中的对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>text</td><td>str</td><td>表情名称</td><td>包括左右两侧的中括号，如<code>[tv_doge]</code></td></tr><tr><td>uri</td><td>str</td><td>表情链接</td><td></td></tr><tr><td>size</td><td>num</td><td>表情尺寸</td><td>1：小<br>2：大</td></tr><tr><td>gif_url</td><td>str</td><td>表情GIF链接</td><td>仅部分表情存在此项</td></tr></tbody></table><p><strong>示例：</strong></p><p>获取与目标用户<code>mid=123</code>的私信记录：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-G</span> <span class="token string">&#39;https://api.vc.bilibili.com/svr_sync/v1/svr_sync/fetch_session_msgs&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;talker_id=123&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;session_type=1&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;size=20&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;sender_device_id=1&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;build=0&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;mobi_app=web&#39;</span> <span class="token punctuation">\\</span>
    <span class="token parameter variable">-b</span> <span class="token string">&#39;SESSDATA=xxx&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details><summary>查看响应示例：</summary><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;ttl&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;messages&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;sender_uid&quot;</span><span class="token operator">:</span> <span class="token number">2239814</span><span class="token punctuation">,</span>
                <span class="token property">&quot;receiver_type&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token property">&quot;receiver_id&quot;</span><span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span>
                <span class="token property">&quot;msg_type&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token property">&quot;content&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{\\&quot;content\\&quot;:\\&quot;[口罩]\\&quot;}&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;msg_seqno&quot;</span><span class="token operator">:</span> <span class="token number">309675413389322</span><span class="token punctuation">,</span>
                <span class="token property">&quot;timestamp&quot;</span><span class="token operator">:</span> <span class="token number">1654154093</span><span class="token punctuation">,</span>
                <span class="token property">&quot;at_uids&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                    <span class="token number">0</span>
                <span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token property">&quot;msg_key&quot;</span><span class="token operator">:</span> <span class="token number">7104537732714964358</span><span class="token punctuation">,</span>
                <span class="token property">&quot;msg_status&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;notify_code&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;new_face_version&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token property">&quot;msg_source&quot;</span><span class="token operator">:</span> <span class="token number">2</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;sender_uid&quot;</span><span class="token operator">:</span> <span class="token number">2239814</span><span class="token punctuation">,</span>
                <span class="token property">&quot;receiver_type&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token property">&quot;receiver_id&quot;</span><span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span>
                <span class="token property">&quot;msg_type&quot;</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
                <span class="token property">&quot;content&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{\\&quot;content\\&quot;:\\&quot;1\\&quot;}&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;msg_seqno&quot;</span><span class="token operator">:</span> <span class="token number">308302399586307</span><span class="token punctuation">,</span>
                <span class="token property">&quot;timestamp&quot;</span><span class="token operator">:</span> <span class="token number">1654072255</span><span class="token punctuation">,</span>
                <span class="token property">&quot;at_uids&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                    <span class="token number">0</span>
                <span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token property">&quot;msg_key&quot;</span><span class="token operator">:</span> <span class="token number">7104186240789226795</span><span class="token punctuation">,</span>
                <span class="token property">&quot;msg_status&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token property">&quot;notify_code&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;msg_source&quot;</span><span class="token operator">:</span> <span class="token number">7</span>

            <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token property">&quot;has_more&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;min_seqno&quot;</span><span class="token operator">:</span> <span class="token number">308188515844097</span><span class="token punctuation">,</span>
        <span class="token property">&quot;max_seqno&quot;</span><span class="token operator">:</span> <span class="token number">309675413389322</span><span class="token punctuation">,</span>
        <span class="token property">&quot;e_infos&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token punctuation">{</span>
                <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;[口罩]&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://i0.hdslb.com/bfs/emote/3ad2f66b151496d2a5fb0a8ea75f32265d778dd3.png&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;size&quot;</span><span class="token operator">:</span> <span class="token number">1</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h2 id="获取会话限制状态" tabindex="-1"><a class="header-anchor" href="#获取会话限制状态" aria-hidden="true">#</a> 获取会话限制状态</h2><blockquote><p>https://api.vc.bilibili.com/link_setting/v1/link_setting/is_limit</p></blockquote><p><em>请求方式：GET</em></p><p>认证方式：Cookie（SESSDATA）</p><p>仅对用户会话调用本接口</p><p><strong>url参数：</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>内容</th><th>必要性</th><th>备注</th></tr></thead><tbody><tr><td>uid</td><td>num</td><td>聊天对象mid</td><td>必要</td><td></td></tr><tr><td>type</td><td>num</td><td>1</td><td>必要</td><td></td></tr></tbody></table><p><strong>json回复：</strong></p><p>根对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>code</td><td>num</td><td>返回值</td><td>0：成功<br>2：非法参数<br>-101：账号未登录<br>-400：请求错误</td></tr><tr><td>msg</td><td>str</td><td>错误信息</td><td>默认为0</td></tr><tr><td>message</td><td>str</td><td>错误信息</td><td>默认为0</td></tr><tr><td>ttl</td><td>num</td><td>1</td><td></td></tr><tr><td>data</td><td>obj</td><td>数据本体</td><td></td></tr></tbody></table><p><code>data</code>对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>is_limit</td><td>num</td><td>用户是否被封禁</td><td></td></tr><tr><td>report_limit</td><td>num</td><td>自己是否被限制举报该会话</td><td>常见于自己被封禁时出现该情况</td></tr></tbody></table><p><strong>示例：</strong></p><p>获取<code>uid=123</code>的限制状态：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-G</span> <span class="token string">&#39;https://api.vc.bilibili.com/link_setting/v1/link_setting/is_limit&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;uid=123&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;type=1&#39;</span> <span class="token punctuation">\\</span>
    <span class="token parameter variable">-b</span> <span class="token string">&#39;SESSDATA=xxx&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details><summary>查看响应示例：</summary><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;ttl&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;is_limit&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;report_limit&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h2 id="获取会话推送设置" tabindex="-1"><a class="header-anchor" href="#获取会话推送设置" aria-hidden="true">#</a> 获取会话推送设置</h2><blockquote><p>https://api.vc.bilibili.com/link_setting/v1/link_setting/get_session_ss</p></blockquote><p><em>请求方式：GET</em></p><p>认证方式：Cookie（SESSDATA）</p><p>仅对用户会话调用本接口</p><p><strong>url参数：</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>内容</th><th>必要性</th><th>备注</th></tr></thead><tbody><tr><td>talker_uid</td><td>num</td><td>聊天对象mid</td><td>必要</td><td></td></tr><tr><td>build</td><td>num</td><td>客户端内部版本号</td><td>非必要</td><td>默认为 <code>0</code></td></tr><tr><td>mobi_app</td><td>str</td><td>平台标识</td><td>非必要</td><td>可为 <code>web</code> 等</td></tr></tbody></table><p><strong>json回复：</strong></p><p>根对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>code</td><td>num</td><td>返回值</td><td>0：成功<br>2：非法参数<br>-101：账号未登录<br>-400：请求错误</td></tr><tr><td>msg</td><td>str</td><td>错误信息</td><td>默认为0</td></tr><tr><td>message</td><td>str</td><td>错误信息</td><td>默认为0</td></tr><tr><td>ttl</td><td>num</td><td>1</td><td></td></tr><tr><td>data</td><td>obj</td><td>数据本体</td><td></td></tr></tbody></table><p><code>data</code>对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>follow_status</td><td>num</td><td>对方对于自己的关注属性</td><td>0：未关注<br><s>1：悄悄关注（现已下线）</s><br>2：已关注<br>6：已互粉<br>128：已拉黑</td></tr><tr><td>special</td><td>num</td><td>自己是否特别关注了对方</td><td></td></tr><tr><td>push_setting</td><td>num</td><td>推送设置</td><td>0：接收推送<br>1：不接收推送</td></tr><tr><td>show_push_setting</td><td>num</td><td>是否显示推送设置</td><td></td></tr></tbody></table><p><strong>示例：</strong></p><p>获取<code>talker_uid=123</code>的推送设置：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-G</span> <span class="token string">&#39;https://api.vc.bilibili.com/link_setting/v1/link_setting/get_session_ss&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;talker_uid=123&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;build=0&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;mobi_app=web&#39;</span> <span class="token punctuation">\\</span>
    <span class="token parameter variable">-b</span> <span class="token string">&#39;SESSDATA=xxx&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details><summary>查看响应示例：</summary><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;ttl&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;follow_status&quot;</span><span class="token operator">:</span> <span class="token number">6</span><span class="token punctuation">,</span>
    <span class="token property">&quot;special&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    <span class="token property">&quot;push_setting&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token property">&quot;show_push_setting&quot;</span><span class="token operator">:</span> <span class="token number">1</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h2 id="获取多个视频、番剧、专栏的信息" tabindex="-1"><a class="header-anchor" href="#获取多个视频、番剧、专栏的信息" aria-hidden="true">#</a> 获取多个视频、番剧、专栏的信息</h2><blockquote><p>https://api.vc.bilibili.com/x/im/feed/infoweb</p></blockquote><p><em>请求方式：GET</em></p><p>认证方式：Cookie（SESSDATA）</p><p>可用于获取私信中分享或推送的多个视频、番剧、专栏的信息</p><p><strong>url参数：</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>内容</th><th>必要性</th><th>备注</th></tr></thead><tbody><tr><td>aids</td><td>nums</td><td>视频AV号列表</td><td>必要 (可选)</td><td><code>aids</code>、<code>ep_ids</code> 与 <code>article_ids</code> 中须至少存在一个参数，每个成员间用 <code>,</code> 分隔，最多 50 个成员</td></tr><tr><td>ep_ids</td><td>nums</td><td>番剧epid列表</td><td>必要 (可选)</td><td><code>aids</code>、<code>ep_ids</code> 与 <code>article_ids</code> 中须至少存在一个参数，每个成员间用 <code>,</code> 分隔，最多 50 个成员</td></tr><tr><td>article_ids</td><td>nums</td><td>专栏CV号列表</td><td>必要 (可选)</td><td><code>aids</code>、<code>ep_ids</code> 与 <code>article_ids</code> 中须至少存在一个参数，每个成员间用 <code>,</code> 分隔，无成员限制</td></tr><tr><td>build</td><td>num</td><td>客户端内部版本号</td><td>非必要</td><td>默认为 <code>0</code></td></tr><tr><td>mobi_app</td><td>str</td><td>平台标识</td><td>必要</td><td>可为 <code>web</code> 等</td></tr></tbody></table><p><strong>json回复：</strong></p><p>根对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>code</td><td>num</td><td>返回值</td><td>0：成功<br>-101：账号未登录<br>-400：请求错误</td></tr><tr><td>message</td><td>str</td><td>错误信息</td><td>默认为0</td></tr><tr><td>ttl</td><td>num</td><td>1</td><td></td></tr><tr><td>data</td><td>obj</td><td>数据本体</td><td></td></tr></tbody></table><p><code>data</code>对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>archive</td><td>array</td><td>视频信息列表</td><td>仅在指定了 <code>aids</code> 参数时存在此项</td></tr><tr><td>article</td><td>array</td><td>专栏信息列表</td><td>仅在指定了 <code>article_ids</code> 参数时存在此项</td></tr><tr><td>pgc</td><td>array</td><td>番剧信息列表</td><td>仅在指定了 <code>ep_ids</code> 参数时存在此项</td></tr></tbody></table><p><code>archive</code>、<code>article</code>、<code>pgc</code>数组：</p><table><thead><tr><th>项</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>0</td><td>obj</td><td>信息1</td><td></td></tr><tr><td>n</td><td>obj</td><td>信息(n+1)</td><td></td></tr><tr><td>……</td><td>obj</td><td>……</td><td>……</td></tr></tbody></table><p><code>archive</code>数组中的对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>bvid</td><td>str</td><td>视频BV号</td><td></td></tr><tr><td>aid</td><td>num</td><td>视频AV号</td><td></td></tr><tr><td>title</td><td>str</td><td>视频标题</td><td>若视频失效则为 <code>内容已失效</code></td></tr><tr><td>pic</td><td>str</td><td>视频封面</td><td>若视频失效则为空文本</td></tr><tr><td>param</td><td>str</td><td>提供的参数</td><td>即 AV 号的文本形式</td></tr><tr><td>uri</td><td>str</td><td>跳转url</td><td><code>bilibili://video/{视频AV号}</code></td></tr><tr><td>goto</td><td>str</td><td><code>av</code></td><td></td></tr><tr><td>duration</td><td>num</td><td>视频时长</td><td>以秒为单位，若视频失效则为 <code>0</code></td></tr><tr><td>up_name</td><td>str</td><td>视频UP主昵称</td><td></td></tr><tr><td>view</td><td>num</td><td>视频播放量</td><td></td></tr><tr><td>danmaku</td><td>num</td><td>视频弹幕数</td><td></td></tr><tr><td>status</td><td>num</td><td>视频状态</td><td>0：正常<br>-1：已失效</td></tr><tr><td>is_started</td><td>num</td><td>1</td><td><strong>作用尚不明确</strong></td></tr></tbody></table><p><code>article</code>数组中的对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>id</td><td>num</td><td>专栏CV号</td><td></td></tr><tr><td>title</td><td>str</td><td>专栏标题</td><td>若专栏失效则为 <code>内容已失效</code></td></tr><tr><td>summary</td><td>str</td><td>专栏内容概要</td><td>若专栏失效则为空文本</td></tr><tr><td>template_id</td><td>num</td><td>（？）</td><td><strong>作用尚不明确</strong></td></tr><tr><td>up_name</td><td>str</td><td>专栏UP主昵称</td><td>若专栏失效则为空文本</td></tr><tr><td>image_urls</td><td>array</td><td>专栏封面列表</td><td>若专栏失效则为空数组</td></tr><tr><td>view_num</td><td>num</td><td>专栏观看数</td><td>若专栏失效则为 <code>0</code></td></tr><tr><td>like_num</td><td>num</td><td>专栏点赞数</td><td>若专栏失效则为 <code>0</code></td></tr><tr><td>reply_num</td><td>num</td><td>专栏评论数</td><td>若专栏失效则为 <code>0</code></td></tr><tr><td>status</td><td>num</td><td>专栏状态</td><td>0：正常<br>-1：已失效</td></tr></tbody></table><p><code>image_urls</code>数组：</p><table><thead><tr><th>项</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>0</td><td>str</td><td>封面1</td><td></td></tr><tr><td>n</td><td>str</td><td>封面(n+1)</td><td></td></tr><tr><td>……</td><td>str</td><td>……</td><td>……</td></tr></tbody></table><p><code>pgc</code>数组中的对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>ep_id</td><td>num</td><td>番剧epid</td><td></td></tr><tr><td>cover</td><td>str</td><td>番剧封面url</td><td></td></tr><tr><td>title</td><td>str</td><td>番剧分享标题</td><td>如 <code>《{番剧名}》 第{n}话 {单集标题}</code>、<code>《{番剧名}》 {备注}</code> 等</td></tr><tr><td>duration</td><td>num</td><td>番剧时长</td><td>以秒为单位</td></tr><tr><td>view</td><td>num</td><td>番剧播放量</td><td></td></tr><tr><td>danmaku</td><td>num</td><td>番剧弹幕数</td><td></td></tr><tr><td>url</td><td>str</td><td>跳转url</td><td><code>https://www.bilibili.com/bangumi/play/ep{番剧epid}</code></td></tr></tbody></table><p><strong>示例：</strong></p><p>获取<code>aids=170001&amp;ep_ids=780019&amp;article_ids=1</code>的信息</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token parameter variable">-G</span> <span class="token string">&#39;https://api.vc.bilibili.com/x/im/feed/infoweb&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;aids=170001&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;ep_ids=780019&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;article_ids=1&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;build=0&#39;</span> <span class="token punctuation">\\</span>
    --data-urlencode <span class="token string">&#39;mobi_app=web&#39;</span> <span class="token punctuation">\\</span>
    <span class="token parameter variable">-b</span> <span class="token string">&#39;SESSDATA=xxx&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details><summary>查看响应示例：</summary><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;ttl&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;archive&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;bvid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BV17x411w7KC&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;aid&quot;</span><span class="token operator">:</span> <span class="token number">170001</span><span class="token punctuation">,</span>
        <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;【MV】保加利亚妖王AZIS视频合辑&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;pic&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://i2.hdslb.com/bfs/archive/1ada8c32a9d168e4b2ee3e010f24789ba3353785.jpg&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;param&quot;</span><span class="token operator">:</span> <span class="token string">&quot;170001&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;uri&quot;</span><span class="token operator">:</span> <span class="token string">&quot;bilibili://video/170001?player_height=288&amp;player_rotate=0&amp;player_width=512&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;goto&quot;</span><span class="token operator">:</span> <span class="token string">&quot;av&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;duration&quot;</span><span class="token operator">:</span> <span class="token number">2412</span><span class="token punctuation">,</span>
        <span class="token property">&quot;up_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;冰封.虾子&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;view&quot;</span><span class="token operator">:</span> <span class="token number">44809333</span><span class="token punctuation">,</span>
        <span class="token property">&quot;danmaku&quot;</span><span class="token operator">:</span> <span class="token number">913266</span><span class="token punctuation">,</span>
        <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token property">&quot;is_started&quot;</span><span class="token operator">:</span> <span class="token number">1</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;article&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;未知的光&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;summary&quot;</span><span class="token operator">:</span> <span class="token string">&quot;天空像是倾倒出的墨水，黑得静谧而深邃。黎明还远，光亮全无。夜不能寐。披衣，起床。茶香的弥漫，一盏灯的相伴。夜，你是我久别重逢的朋友，那一刹那的相见，带给了我久违的安思。如果不是梦魇的皮闹，我本不该投入&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;template_id&quot;</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
        <span class="token property">&quot;up_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;健行见远渐忘&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;image_urls&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token string">&quot;https://i0.hdslb.com/bfs/article/d2eedf1fd338bceca10099e2f7b33fa9017c859b.jpg&quot;</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token property">&quot;view_num&quot;</span><span class="token operator">:</span> <span class="token number">1608818</span><span class="token punctuation">,</span>
        <span class="token property">&quot;like_num&quot;</span><span class="token operator">:</span> <span class="token number">32247</span><span class="token punctuation">,</span>
        <span class="token property">&quot;reply_num&quot;</span><span class="token operator">:</span> <span class="token number">14143</span><span class="token punctuation">,</span>
        <span class="token property">&quot;status&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;pgc&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;ep_id&quot;</span><span class="token operator">:</span> <span class="token number">780019</span><span class="token punctuation">,</span>
        <span class="token property">&quot;cover&quot;</span><span class="token operator">:</span> <span class="token string">&quot;http://i0.hdslb.com/bfs/archive/ee28c04d15fb133a9c70c502fabfbdc7e5051ffe.png&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;title&quot;</span><span class="token operator">:</span> <span class="token string">&quot;《铃芽之旅》 新海诚集大成之作&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;duration&quot;</span><span class="token operator">:</span> <span class="token number">7283</span><span class="token punctuation">,</span>
        <span class="token property">&quot;view&quot;</span><span class="token operator">:</span> <span class="token number">22088209</span><span class="token punctuation">,</span>
        <span class="token property">&quot;danmaku&quot;</span><span class="token operator">:</span> <span class="token number">93069</span><span class="token punctuation">,</span>
        <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://www.bilibili.com/bangumi/play/ep780019&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h2 id="设置私信为已读" tabindex="-1"><a class="header-anchor" href="#设置私信为已读" aria-hidden="true">#</a> 设置私信为已读</h2><blockquote><p>https://api.vc.bilibili.com/session_svr/v1/session_svr/update_ack</p></blockquote><p><em>请求方式：POST</em></p><p>认证方式：Cookie（SESSDATA）</p><p>将指定会话中的指定消息及以前的消息设置为已读</p><p><strong>正文参数（application/x-www-form-urlencoded）：</strong></p><table><thead><tr><th>参数名</th><th>类型</th><th>内容</th><th>必要性</th><th>备注</th></tr></thead><tbody><tr><td>talker_id</td><td>num</td><td>聊天对象的id</td><td>必要</td><td><code>session_type</code> 为 <code>1</code> 时表示用户 mid，为 <code>2</code> 时表示粉丝团 id</td></tr><tr><td>session_type</td><td>num</td><td>聊天对象的类型</td><td>必要</td><td>1：用户<br>2：粉丝团</td></tr><tr><td>ack_seqno</td><td>num</td><td>设置为已读的消息序列号</td><td>必要</td><td></td></tr><tr><td>csrf_token</td><td>str</td><td>CSRF Token（位于cookie）</td><td>必要</td><td></td></tr><tr><td>csrf</td><td>str</td><td>CSRF Token（位于cookie）</td><td>必要</td><td></td></tr><tr><td>build</td><td>num</td><td>客户端内部版本号</td><td>非必要</td><td>默认为 <code>0</code></td></tr><tr><td>mobi_app</td><td>str</td><td>平台标识</td><td>非必要</td><td>可为 <code>web</code> 等</td></tr></tbody></table><p><strong>json回复：</strong></p><p>根对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>code</td><td>num</td><td>返回值</td><td>0：成功<br>-101：账号未登录<br>-400：请求错误</td></tr><tr><td>msg</td><td>str</td><td>错误信息</td><td>成功时为0</td></tr><tr><td>message</td><td>str</td><td>错误信息</td><td>成功时为0</td></tr><tr><td>ttl</td><td>num</td><td></td><td>默认为1</td></tr><tr><td>data</td><td>有效时：obj<br>无效时：不存在该项</td><td>信息本体</td><td></td></tr></tbody></table><p><code>data</code>对象：</p><p>一个不含任何项目的对象，即 <code>{}</code></p><p><strong>示例：</strong></p><p>将<code>talker_id=293793435</code>、<code>session_type=1</code>的<code>ack_seqno=1236306587877408</code>消息及之前的消息设置为已读</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token string">&#39;https://api.vc.bilibili.com/session_svr/v1/session_svr/update_ack&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;talker_id=293793435&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;session_type=1&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;ack_seqno=1236306587877408&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;csrf=xxx&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;csrf_token=xxx&#39;</span> <span class="token punctuation">\\</span>
<span class="token parameter variable">-b</span> <span class="token string">&#39;SESSDATA=xxx&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details><summary>查看响应示例：</summary><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;ttl&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><h2 id="发送私信-web端" tabindex="-1"><a class="header-anchor" href="#发送私信-web端" aria-hidden="true">#</a> 发送私信（web端）</h2><blockquote><p>https://api.vc.bilibili.com/web_im/v1/web_im/send_msg</p></blockquote><p><em>请求方式：POST</em></p><p>认证方式：Cookie（SESSDATA）</p><p><strong>仅支持发送 <code>msg[msg_type]</code> 为 <code>1</code>、<code>2</code> 或 <code>5</code> 的私信</strong></p><p>调用该接口同时会将该会话设置为已读</p><p><strong>正文参数（application/x-www-form-urlencoded）：</strong></p>`,171),ts=s("thead",null,[s("tr",null,[s("th",null,"参数名"),s("th",null,"类型"),s("th",null,"内容"),s("th",null,"必要性"),s("th",null,"备注")])],-1),as=s("tr",null,[s("td",null,"msg[sender_uid]"),s("td",null,"num"),s("td",null,"发送者mid"),s("td",null,"必要"),s("td",null,"必须为自己的 mid")],-1),es=s("tr",null,[s("td",null,"msg[receiver_id]"),s("td",null,"num"),s("td",null,"接收者id"),s("td",null,"必要"),s("td",null,[s("code",null,"msg[receiver_type]"),n(" 为 "),s("code",null,"1"),n(" 时表示用户 mid，为 "),s("code",null,"2"),n(" 时表示粉丝团 id")])],-1),os=s("tr",null,[s("td",null,"msg[receiver_type]"),s("td",null,"num"),s("td",null,"接收者类型"),s("td",null,"必要"),s("td",null,[n("1：用户"),s("br"),n("2：粉丝团")])],-1),ps=s("td",null,"msg[msg_type]",-1),ds=s("td",null,"num",-1),ls=s("td",null,"消息类型",-1),us=s("td",null,"必要",-1),rs=s("br",null,null,-1),cs=s("strong",null,[n("此接口仅支持传入 "),s("code",null,"1"),n("、"),s("code",null,"2"),n(" 或 "),s("code",null,"5")],-1),is=s("tr",null,[s("td",null,"msg[msg_status]"),s("td",null,"num"),s("td",null,"消息状态"),s("td",null,"非必要"),s("td",null,[n("恒为 "),s("code",null,"0")])],-1),ks=s("tr",null,[s("td",null,"msg[dev_id]"),s("td",null,"str"),s("td",null,"设备id"),s("td",null,"必要"),s("td",null,[n("实质上即 UUID（版本 4），"),s("strong",null,"生成方式见下")])],-1),ms=s("tr",null,[s("td",null,"msg[timestamp]"),s("td",null,"num"),s("td",null,"当前时间戳（秒）"),s("td",null,"必要"),s("td")],-1),bs=s("tr",null,[s("td",null,"msg[new_face_version]"),s("td",null,"num"),s("td",null,"表情包版本"),s("td",null,"非必要"),s("td",null,[n("提供 "),s("code",null,"0"),n(" 或者未提供本参数表示旧版表情包，此时 B 站会自动转换成新版表情包，例如 "),s("code",null,"[doge]"),n(" -> "),s("code",null,"[tv_doge]"),n("；"),s("code",null,"1"),n(" 为新版")])],-1),vs=s("td",null,"msg[content]",-1),qs=s("td",null,"str",-1),_s=s("td",null,"消息内容",-1),hs=s("td",null,"必要",-1),ys=s("tr",null,[s("td",null,"csrf_token"),s("td",null,"str"),s("td",null,"CSRF Token（位于cookie）"),s("td",null,"必要"),s("td")],-1),gs=s("tr",null,[s("td",null,"csrf"),s("td",null,"str"),s("td",null,"CSRF Token（位于cookie）"),s("td",null,"必要"),s("td")],-1),fs=s("tr",null,[s("td",null,"build"),s("td",null,"num"),s("td",null,"客户端内部版本号"),s("td",null,"非必要"),s("td",null,[n("默认为 "),s("code",null,"0")])],-1),xs=s("tr",null,[s("td",null,"mobi_app"),s("td",null,"str"),s("td",null,"平台标识"),s("td",null,"非必要"),s("td",null,[n("可为 "),s("code",null,"web"),n(" 等")])],-1),ws=s("hr",null,null,-1),js=s("p",null,[s("strong",null,"dev_id 的生成：")],-1),As=s("p",null,"dev_id 实质上就是 UUID（版本 4）",-1),Es=a(`<summary>查看生成 UUID 的代码</summary><h3 id="python" tabindex="-1"><a class="header-anchor" href="#python" aria-hidden="true">#</a> Python</h3><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">import</span> uuid

dev_id <span class="token operator">=</span> <span class="token builtin">str</span><span class="token punctuation">(</span>uuid<span class="token punctuation">.</span>uuid4<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="javascript" tabindex="-1"><a class="header-anchor" href="#javascript" aria-hidden="true">#</a> JavaScript</h3><p>以下代码适用于较新版的 JS 引擎（Chrome≥92，Firefox≥95，Safari≥15.4，Node.js≥19.0.0）：</p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> dev_id <span class="token operator">=</span> crypto<span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,6),Ss={href:"https://github.com/andywang425/BLTH/blob/45fe93e31754ca8bf07059d46266398e787dbf45/B%E7%AB%99%E7%9B%B4%E6%92%AD%E9%97%B4%E6%8C%82%E6%9C%BA%E5%8A%A9%E6%89%8B.js#L6618",target:"_blank",rel:"noopener noreferrer"},Bs=a(`<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">const</span> dev_id <span class="token operator">=</span> <span class="token string">&quot;xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx&quot;</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">[xy]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> randomInt <span class="token operator">=</span> <span class="token number">16</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token string">&quot;x&quot;</span> <span class="token operator">===</span> name <span class="token operator">?</span> randomInt <span class="token operator">:</span> <span class="token number">3</span> <span class="token operator">&amp;</span> randomInt <span class="token operator">|</span> <span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="java" tabindex="-1"><a class="header-anchor" href="#java" aria-hidden="true">#</a> Java</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span></span><span class="token class-name">UUID</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">getDevId</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">UUID</span> uuid <span class="token operator">=</span> <span class="token constant">UUID</span><span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> uuid<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,3),Ds=a(`<hr><p><strong>json回复：</strong></p><p>根对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>code</td><td>num</td><td>返回值</td><td>0：成功<br>-3：系统错误<br>-101：账号未登录<br>-400：请求错误<br>10005：msgkey不存在<br>21007：消息过长，无法发送<br>21020：你发送消息频率过快，请稍后再发~<br>21026：不能给自己发送消息哦~<br>21028：由于系统升级，暂无法发送，敬请谅解<br>21035：该类消息暂时无法发送<br>21037：图片格式不合法，不要调戏接口啦<br>21041：消息已超期，不能撤回了哦<br>21042：消息已经撤回了哦<br>21046：你发消息的频率太高了，请在24小时后再发吧~<br>21047：对方主动回复或关注你前，最多发送1条消息~<br>25003：因对方隐私设置，暂无法给他发送聊天消息<br>25005：你已拉黑了对方，请先将对方移出黑名单后才能聊天<br>700013：已解散QAQ，无法执行此操作<br>700014：你已不在此同萌中QAQ，无法执行此操作</td></tr><tr><td>message</td><td>str</td><td>错误信息</td><td>成功时为0</td></tr><tr><td>ttl</td><td>num</td><td></td><td>默认为1</td></tr><tr><td>data</td><td>有效时：obj<br>无效时：null</td><td>信息本体</td><td></td></tr></tbody></table><p><code>data</code>对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>msg_key</td><td>num</td><td>消息唯一id</td><td></td></tr><tr><td>e_infos</td><td>array</td><td>表情列表</td><td>仅当请求参数 <code>msg[msg_type]</code> 为 <code>1</code>，且私信内容中有表情时有此项</td></tr><tr><td>msg_content</td><td>str</td><td>发送的私信内容</td><td>一般同请求参数 <code>msg[content]</code> 的值，仅当请求参数 <code>msg[msg_type]</code> 为 <code>1</code> 时有此项</td></tr><tr><td>key_hit_infos</td><td>obj</td><td>触发的提示</td><td>仅当请求参数 <code>msg[msg_type]</code> 为 <code>1</code> 且 <code>msg[receiver_type]</code> 为 <code>1</code> 时有此项</td></tr></tbody></table><p><code>e_infos</code>数组：</p><table><thead><tr><th>项</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>0</td><td>obj</td><td>表情1</td><td></td></tr><tr><td>n</td><td>obj</td><td>表情(n+1)</td><td></td></tr><tr><td>……</td><td>obj</td><td>……</td><td>……</td></tr></tbody></table><p><code>e_infos</code>数组中的对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>text</td><td>str</td><td>表情名称</td><td>包括左右两侧的中括号，如 <code>[tv_doge]</code></td></tr><tr><td>uri</td><td>str</td><td>表情链接</td><td></td></tr><tr><td>size</td><td>num</td><td>表情尺寸</td><td>1：小<br>2：大</td></tr><tr><td>gif_url</td><td>str</td><td>表情GIF链接</td><td>仅部分表情存在此项，如小电视表情</td></tr></tbody></table><p><code>key_hit_infos</code>对象：</p><table><thead><tr><th>字段</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>toast</td><td>str</td><td>提示信息文字</td><td>当触发了提示时有此项</td></tr><tr><td>rule_id</td><td>num</td><td>触发的规则id</td><td>当触发了提示时有此项，详细信息有待补充</td></tr><tr><td>high_text</td><td>array</td><td>高亮的文本</td><td>当触发了提示时有此项</td></tr></tbody></table><p><code>high_text</code>数组：</p><table><thead><tr><th>项</th><th>类型</th><th>内容</th><th>备注</th></tr></thead><tbody><tr><td>0</td><td>obj</td><td>高亮文本1</td><td>详细信息有待补充</td></tr><tr><td>n</td><td>obj</td><td>高亮文本(n+1)</td><td></td></tr><tr><td>……</td><td>obj</td><td>……</td><td>……</td></tr></tbody></table><p><strong>示例：</strong></p><p>给目标用户<code>mid=1</code>发一条文字私信：</p><blockquote><p>up主你好，<br>催更[doge]</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token string">&#39;https://api.vc.bilibili.com/web_im/v1/web_im/send_msg&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;msg[sender_uid]=293793435&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;msg[receiver_id]=1&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;msg[receiver_type]=1&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;msg[msg_type]=1&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;msg[msg_status]=0&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;msg[dev_id]=372778FD-E359-461D-86A3-EA2BCC6FF52A&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;msg[timestamp]=1626181379&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;msg[new_face_version]=1&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;msg[content]={&quot;content&quot;:&quot;up主你好，\\n催更[doge]&quot;}&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;csrf=xxx&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;csrf_token=xxx&#39;</span> <span class="token punctuation">\\</span>
<span class="token parameter variable">-b</span> <span class="token string">&#39;SESSDATA=xxx&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details><summary>查看响应示例：</summary><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;ttl&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;msg_key&quot;</span><span class="token operator">:</span> <span class="token number">6984393491767669026</span><span class="token punctuation">,</span>
    <span class="token property">&quot;e_infos&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;[doge]&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;url&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://i0.hdslb.com/bfs/emote/3087d273a78ccaff4bb1e9972e2ba2a7583c9f11.png&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;size&quot;</span><span class="token operator">:</span> <span class="token number">1</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;msg_content&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{\\&quot;content\\&quot;:\\&quot;up主你好，\\\\n催更[doge]\\&quot;}&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;key_hit_infos&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><p>给目标用户<code>mid=1</code>发一条图片私信：</p><blockquote><img src="https://i1.hdslb.com/bfs/face/aebb2639a0d47f2ce1fec0631f412eaf53d4a0be.jpg" style="zoom:50%;"></blockquote><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token string">&#39;https://api.vc.bilibili.com/web_im/v1/web_im/send_msg&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;msg[sender_uid]=293793435&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;msg[receiver_id]=1&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;msg[receiver_type]=1&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;msg[msg_type]=2&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;msg[msg_status]=0&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;msg[dev_id]=372778FD-E359-461D-86A3-EA2BCC6FF52A&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;msg[timestamp]=1626181379&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;msg[content]={&quot;url&quot;:&quot;https://i1.hdslb.com/bfs/face/aebb2639a0d47f2ce1fec0631f412eaf53d4a0be.jpg&quot;,&quot;height&quot;:300,&quot;width&quot;:300,&quot;imageType&quot;:&quot;jpeg&quot;,&quot;original&quot;:1,&quot;size&quot;:54.144}&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;csrf=xxx&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;csrf_token=xxx&#39;</span> <span class="token punctuation">\\</span>
<span class="token parameter variable">-b</span> <span class="token string">&#39;SESSDATA=xxx&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details><summary>查看响应示例：</summary><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;msg_key&quot;</span><span class="token operator">:</span> <span class="token number">6852570013146024354</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details><p>给目标用户<code>mid=1</code>发送会触发提示的私信：</p><blockquote><p>支付宝</p></blockquote><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">curl</span> <span class="token string">&#39;https://api.vc.bilibili.com/web_im/v1/web_im/send_msg&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;msg[sender_uid]=293793435&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;msg[receiver_id]=1&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;msg[receiver_type]=1&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;msg[msg_type]=1&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;msg[msg_status]=0&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;msg[dev_id]=372778FD-E359-461D-86A3-EA2BCC6FF52A&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;msg[timestamp]=1626181379&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;msg[content]={&quot;content&quot;:&quot;支付宝&quot;}&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;csrf=xxx&#39;</span> <span class="token punctuation">\\</span>
--data-urlencode <span class="token string">&#39;csrf_token=xxx&#39;</span> <span class="token punctuation">\\</span>
<span class="token parameter variable">-b</span> <span class="token string">&#39;SESSDATA=xxx&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details><summary>查看响应示例：</summary><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;ttl&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token property">&quot;data&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;msg_key&quot;</span><span class="token operator">:</span> <span class="token number">6984393491767669026</span><span class="token punctuation">,</span>
    <span class="token property">&quot;msg_content&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{\\&quot;content\\&quot;:\\&quot;支付宝\\&quot;}&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;key_hit_infos&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;toast&quot;</span><span class="token operator">:</span> <span class="token string">&quot;【温馨提示】为保障消费者权益，根据平台规则，如创作者在与消费者沟通中进行发布要求非法转账、欺诈转账等违规行为，平台有权对此进行处罚，感谢您的理解。&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;rule_id&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
      <span class="token property">&quot;high_text&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></details>`,27);function Ts(Hs,Cs){const e=d("RouterLink"),p=d("ExternalLinkIcon");return u(),r("div",null,[i,s("p",null,[n("注：私信主体对象≠"),t(e,{to:"/docs/message/private_msg_content.html"},{default:o(()=>[n("私信内容对象")]),_:1})]),s("table",null,[k,s("tbody",null,[m,b,v,s("tr",null,[q,_,h,s("td",null,[n("详见"),t(e,{to:"/docs/message/private_msg_content.html"},{default:o(()=>[n("私信消息类型、内容说明")]),_:1})])]),s("tr",null,[y,g,f,s("td",null,[t(e,{to:"/docs/message/private_msg_content.html"},{default:o(()=>[n("私信内容对象")]),_:1}),x])]),w,j,A,E,S,B,D,T,H])]),C,s("table",null,[F,s("tbody",null,[z,U,I,G,V,P,Q,O,N,J,L,R,M,K,W,Z,X,s("tr",null,[Y,$,s("td",null,[n("如：给"),s("a",ss,[n("搜索AI助手测试版"),t(p)]),n("发送私信时对方的自动回复")])])])]),ns,s("table",null,[ts,s("tbody",null,[as,es,os,s("tr",null,[ps,ds,ls,us,s("td",null,[n("详见"),t(e,{to:"/docs/message/private_msg_content.html"},{default:o(()=>[n("私信消息类型、内容说明")]),_:1}),rs,cs])]),is,ks,ms,bs,s("tr",null,[vs,qs,_s,hs,s("td",null,[n("详见"),t(e,{to:"/docs/message/private_msg_content.html"},{default:o(()=>[n("私信消息类型、内容说明")]),_:1})])]),ys,gs,fs,xs])]),ws,js,As,s("details",null,[Es,s("p",null,[n("以下为通用代码（来自 "),s("a",Ss,[n("andywang425/BLTH"),t(p)]),n("）：")]),Bs]),Ds])}const zs=l(c,[["render",Ts],["__file","private_msg.html.vue"]]);export{zs as default};
